# Example machines configuration
# Copy this file to machines.tfvars and customize it with your machine details
#
# Note: MAAS API credentials (maas_api_url, maas_api_key) are automatically
# provided by the maas-setup dependency and should not be set here.

machines = {
  "compute-01" = {
    power_type      = "ipmi"
    power_address   = "192.168.1.100"
    power_user      = "admin"
    power_pass      = "password"
    power_driver    = "LAN_2_0"
    power_boot_type = "efi"        # Optional
    cipher_suite_id = 3            # Optional
    pxe_mac_address = "52:54:00:12:34:56"
    distro_series   = "jammy"
    zone            = "default"
    pool            = "default"
    tags            = ["compute", "production"]
  }

  "compute-02" = {
    power_type      = "ipmi"
    power_address   = "192.168.1.101"
    power_user      = "admin"
    power_pass      = "password"
    power_driver    = "LAN_2_0"
    power_boot_type = "efi"        # Optional
    cipher_suite_id = 3            # Optional
    pxe_mac_address = "52:54:00:12:34:57"
    distro_series   = "jammy"
    zone            = "default"
    pool            = "default"
    tags            = ["compute", "production"]
  }

  "storage-01" = {
    power_type      = "manual"
    power_address   = ""
    pxe_mac_address = "52:54:00:ab:cd:ef"
    distro_series   = "jammy"
    zone            = "zone-2"
    pool            = "storage"
    tags            = ["storage"]
    network_interfaces = [
      {
        name        = "eth0"
        subnet_cidr = "10.0.0.0/24"
        ip_address  = "10.0.0.50"
      }
    ]
  }

  "vm-test-01" = {
    power_type      = "virsh"
    power_address   = "qemu+ssh://user@192.168.1.50/system"
    power_user      = null
    power_pass      = null
    pxe_mac_address = "52:54:00:aa:bb:cc"
    distro_series   = "focal"
    zone            = "test"
    tags            = ["virtual", "test"]
    user_data       = <<-EOT
      #cloud-config
      packages:
        - htop
        - vim
      runcmd:
        - echo "VM provisioned" > /root/provisioned.txt
    EOT
  }
}
